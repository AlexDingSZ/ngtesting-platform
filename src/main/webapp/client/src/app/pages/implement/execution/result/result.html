<div class="execution-result">
  <div *ngIf="model" class="row">
    <form [formGroup]="form" (ngSubmit)="save()" class="my-validate-form small-label">
      <div class="form-group row">
        <div class="col-sm-12">
          <button (click)="pass()" type="button" class="btn btn-info btn-sm">通过</button>
          <button (click)="fail()" type="button" class="btn btn-danger btn-sm">失败</button>
          <button (click)="block()" type="button" class="btn btn-warning btn-sm">阻塞</button>

          <button (click)="returnTo()" type="button"
                  class="button-right btn btn-secondary btn-with-icon btn-sm back">
            <i class="ion-backspace"></i>返回
          </button>
        </div>
      </div>

      <div class="form-group row">
        <div class="col-sm-12">
          <field-show (onSave)="saveField($event)" [(model)]="model" [prop]="'title'" [type]="'string'" [form]="form"></field-show>
        </div>
      </div>

      <div class="form-group row">
        <div class="col-sm-12">

          <div class="tabs-container light">
            <div class="tabs">
              <ngb-tabset  (tabChange)="tabChange($event)">
                <ngb-tab id="info">
                  <ng-template ngbTabTitle>信息</ng-template>
                  <ng-template ngbTabContent></ng-template>
                </ngb-tab>
                <ngb-tab id="history">
                  <ng-template ngbTabTitle>历史</ng-template>
                  <ng-template ngbTabContent></ng-template>
                </ngb-tab>
                <ngb-tab id="result">
                  <ng-template ngbTabTitle>结果</ng-template>
                  <ng-template ngbTabContent></ng-template>
                </ngb-tab>
              </ngb-tabset>
            </div>
          </div>

        </div>
      </div>

      <div [class.hidden]="tab != 'info'">

        <div class="row">
          <div class="col-sm-12 property">
          <table class="io">
            <tbody>
              <tr>
                <td style="width: 25%">
                  <div class="label">类型</div>
                  <div class="value">功能<a href="#" class="smart-edit" (click)="onEdit($event)"><i class="ion-edit"></i></a></div>
                </td>
                <td style="width: 25%">
                  <div class="label">优先级</div>
                  <div class="value">高<a href="#" class="smart-edit" (click)="onEdit($event)"><i class="ion-edit"></i></a></div>
                </td>
                <td style="width: 25%">
                  <div class="label">耗时</div>
                  <div class="value">10分钟<a href="#" class="smart-edit" (click)="onEdit($event)"><i class="ion-edit"></i></a></div>
                </td>
                <td style="width: 25%">
                  <div class="label">状态</div>
                  <div class="value">未执行<a href="#" class="smart-edit" (click)="onEdit($event)"><i class="ion-edit"></i></a></div>
                </td>
              </tr>
            <tr>
            </tr>
            </tbody>
          </table>
          </div>
      </div>

      <div class="row">
        <div class="col-sm-12">
          <field-show (onSave)="saveField($event)" [(model)]="model"
                      [label]="'目标'" [prop]="'objective'" [type]="'string'" [form]="form"></field-show>
        </div>
      </div>

      <div *ngFor="let field of fields;" class="row">
        <div class="col-sm-12">
          <field-show (onSave)="saveField($event)" [(model)]="model"
                      [label]="field.label" [prop]="field.column" [type]="'string'" [form]="form"></field-show>
        </div>
      </div>

        <div class="tab-steps form-group row">
          <div class="col-sm-12">
            <steps-table [settings]="settings" [source]="model.steps"

                         (upConfirm)="onUpConfirm($event)"
                         (downConfirm)="onDownConfirm($event)"

                         (createConfirm)="onCreateConfirm($event)"
                         (saveConfirm)="onSaveConfirm($event)"
                         (deleteConfirm)="onDeleteConfirm($event)"
            ></steps-table>
          </div>
        </div>
      </div>

      <div [class.hidden]="tab != 'history'" class="tab-summary">
        历史
      </div>

      <div class="form-group row">
        <label class="col-sm-2 col-form-label"></label>
        <div class="col-sm-10">
          <div class="validate-errors">
            <div class="validate-error" *ngFor="let msg of formErrors">
              <div>{{ msg }}</div>
            </div>
          </div>
        </div>
      </div>

    </form>
  </div>

  <form [formGroup]="form" *ngIf="!model" class="row">
    <div class="my-validate-form small-label">
      <div class="form-group row">
        <label class="col-sm-2 col-form-label"></label>
        <div class="col-sm-10">
          <button (click)="returnTo()" type="button"
                  class="button-right btn btn-secondary btn-with-icon btn-sm back">
            <i class="ion-backspace"></i>返回
          </button>
        </div>
      </div>
    </div>
  </form>

</div>
